<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (17) -->
<title>WatchPermissionSetsServiceGrpc.AsyncService (authzed v0.11.1 API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="declaration: package: com.authzed.api.materialize.v0, class: WatchPermissionSetsServiceGrpc, interface: AsyncService">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-3.6.1.min.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var evenRowColor = "even-row-color";
var oddRowColor = "odd-row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html#class">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" value="search" disabled="disabled">
<input type="reset" id="reset-button" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">com.authzed.api.materialize.v0</a></div>
<h1 title="Interface WatchPermissionSetsServiceGrpc.AsyncService" class="title">Interface WatchPermissionSetsServiceGrpc.AsyncService</h1>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>All Known Implementing Classes:</dt>
<dd><code><a href="WatchPermissionSetsServiceGrpc.WatchPermissionSetsServiceImplBase.html" title="class in com.authzed.api.materialize.v0">WatchPermissionSetsServiceGrpc.WatchPermissionSetsServiceImplBase</a></code></dd>
</dl>
<dl class="notes">
<dt>Enclosing class:</dt>
<dd><a href="WatchPermissionSetsServiceGrpc.html" title="class in com.authzed.api.materialize.v0">WatchPermissionSetsServiceGrpc</a></dd>
</dl>
<hr>
<div class="type-signature"><span class="modifiers">public static interface </span><span class="element-name type-name-label">WatchPermissionSetsServiceGrpc.AsyncService</span></div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab5" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab5', 3)" class="table-tab">Default Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel" aria-labelledby="method-summary-table-tab0">
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code>default void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code><a href="#lookupPermissionSets(com.authzed.api.materialize.v0.LookupPermissionSetsRequest,io.grpc.stub.StreamObserver)" class="member-name-link">lookupPermissionSets</a><wbr>(<a href="LookupPermissionSetsRequest.html" title="class in com.authzed.api.materialize.v0">LookupPermissionSetsRequest</a>&nbsp;request,
 io.grpc.stub.StreamObserver&lt;<a href="LookupPermissionSetsResponse.html" title="class in com.authzed.api.materialize.v0">LookupPermissionSetsResponse</a>&gt;&nbsp;responseObserver)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5">
<div class="block">
 LookupPermissionSets returns the current state of the permission sets which can be used to derive the computed permissions.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code>default void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code><a href="#watchPermissionSets(com.authzed.api.materialize.v0.WatchPermissionSetsRequest,io.grpc.stub.StreamObserver)" class="member-name-link">watchPermissionSets</a><wbr>(<a href="WatchPermissionSetsRequest.html" title="class in com.authzed.api.materialize.v0">WatchPermissionSetsRequest</a>&nbsp;request,
 io.grpc.stub.StreamObserver&lt;<a href="WatchPermissionSetsResponse.html" title="class in com.authzed.api.materialize.v0">WatchPermissionSetsResponse</a>&gt;&nbsp;responseObserver)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5">
<div class="block">
 WatchPermissionSets returns a stream of changes to the sets which can be used to compute the watched permissions.</div>
</div>
</div>
</div>
</div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="watchPermissionSets(com.authzed.api.materialize.v0.WatchPermissionSetsRequest,io.grpc.stub.StreamObserver)">
<h3>watchPermissionSets</h3>
<div class="member-signature"><span class="modifiers">default</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">watchPermissionSets</span><wbr><span class="parameters">(<a href="WatchPermissionSetsRequest.html" title="class in com.authzed.api.materialize.v0">WatchPermissionSetsRequest</a>&nbsp;request,
 io.grpc.stub.StreamObserver&lt;<a href="WatchPermissionSetsResponse.html" title="class in com.authzed.api.materialize.v0">WatchPermissionSetsResponse</a>&gt;&nbsp;responseObserver)</span></div>
<div class="block"><pre>
 WatchPermissionSets returns a stream of changes to the sets which can be used to compute the watched permissions.
 WatchPermissionSets lets consumers achieve the same thing as WatchPermissions, but trades off a simpler usage model with
 significantly lower computational requirements. Unlike WatchPermissions, this method returns changes to the sets of permissions,
 rather than the individual permissions. Permission sets are a normalized form of the computed permissions, which
 means that the consumer must perform an extra computation over this representation to obtain the final computed
 permissions, typically by intersecting the provided sets.
 For example, this would look like a JOIN between the
 materialize permission sets table in a target relation database, the table with the resources to authorize access
 to, and the table with the subject (e.g. a user).
 In exchange, the number of changes issued by WatchPermissionSets will be several orders of magnitude less than those
 emitted by WatchPermissions, which has several implications:
 - significantly less resources to compute the sets
 - significantly less messages to stream over the network
 - significantly less events to ingest on the consumer side
 - less ingestion lag from the origin SpiceDB mutation
 The type of scenarios WatchPermissionSets is particularly well suited is when a single change
 in the origin SpiceDB can yield millions of changes. For example, in the GitHub authorization model, assigning a role
 to a top-level team of an organization with hundreds of thousands of employees can lead to an explosion of
 permission change events that would require a lot of computational resources to process, both on Materialize and
 the consumer side.
 WatchPermissionSets is thus recommended for any larger scale use case where the fan-out in permission changes that
 emerges from a specific schema and data shape is too large to handle effectively.
 The API does not offer a sharding mechanism and thus there should only be one consumer per target system.
 Implementing an active-active HA consumer setup over the same target system will require coordinating which
 revisions have been consumed in order to prevent transitioning to an inconsistent state.
 </pre></div>
</section>
</li>
<li>
<section class="detail" id="lookupPermissionSets(com.authzed.api.materialize.v0.LookupPermissionSetsRequest,io.grpc.stub.StreamObserver)">
<h3>lookupPermissionSets</h3>
<div class="member-signature"><span class="modifiers">default</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">lookupPermissionSets</span><wbr><span class="parameters">(<a href="LookupPermissionSetsRequest.html" title="class in com.authzed.api.materialize.v0">LookupPermissionSetsRequest</a>&nbsp;request,
 io.grpc.stub.StreamObserver&lt;<a href="LookupPermissionSetsResponse.html" title="class in com.authzed.api.materialize.v0">LookupPermissionSetsResponse</a>&gt;&nbsp;responseObserver)</span></div>
<div class="block"><pre>
 LookupPermissionSets returns the current state of the permission sets which can be used to derive the computed permissions.
 It's typically used to backfill the state of the permission sets in the consumer side.
 It's a cursored API and the consumer is responsible to keep track of the cursor and use it on each subsequent call.
 Each stream will return &lt;N&gt; permission sets defined by the specified request limit. The server will keep streaming until
 the sets per stream is hit, or the current state of the sets is reached,
 whatever happens first, and then close the stream. The server will indicate there are no more changes to stream
 through the `completed_members` in the cursor.
 There may be many elements to stream, and so the consumer should be prepared to resume the stream from the last
 cursor received. Once completed, the consumer may start streaming permission set changes using WatchPermissionSets
 and the revision token from the last LookupPermissionSets response.
 </pre></div>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
</div>
</div>
</body>
</html>
